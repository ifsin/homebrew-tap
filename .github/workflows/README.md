# Auto-update Casks Workflow

This GitHub Actions workflow uses the official Homebrew actions to automatically bump casks when new versions are detected via livecheck.

## How it works

1. **Scheduled**: Runs every 5 minutes via cron
2. **Manual**: Can be triggered manually via Actions tab in GitHub
3. **Official Homebrew actions**: Uses `Homebrew/actions/setup-homebrew@master`
4. **Auto-bump action**: Uses `macauley/action-homebrew-bump-cask@v1`
5. **Livecheck integration**: Automatically detects updates via each cask's livecheck configuration
6. **PR creation**: Creates pull requests for version bumps

## What gets updated

The workflow automatically discovers and updates **all casks** in the tap:
- **beeper-nightly**: Monitors nightly build versions via JSON API
- **dia-earlybird**: Monitors RC builds with UUID tracking via Sparkle feed
- **Future casks**: Any new `.rb` files added will be automatically included

## When it runs

- **Schedule**: `*/5 * * * *` (every 5 minutes)
- **Manual**: GitHub → Actions → Autobump casks → "Run workflow"

## PR behavior

- **Branch**: Auto-generated by bump action
- **Title**: "cask_name: update version X.Y.Z → X.Y.Z+1"
- **Commit**: Updated version lines for changed casks
- **Body**: Detailed changelog and version information

## Security

- Uses `${{ secrets.GITHUB_TOKEN }}` (built-in)
- Requires private repository access
- Official Homebrew actions ensure security best practices

## Private Repository Setup

For private repos, this workflow:
1. Uses official Homebrew actions for proper authentication
2. Handles private tap access automatically
3. Requires admin permissions to create PRs
4. Runs on every 5 minutes schedule

## Performance

- **Optimized**: Uses official Homebrew actions
- **Fast**: Pre-installed Homebrew on macOS runners
- **Efficient**: Only processes casks that need updates
- **Reliable**: Maintained by Homebrew community

## Customization

Change frequency by modifying the cron schedule:
```yaml
# Every 2 hours
- cron: '0 */2 * * *'

# Daily at midnight  
- cron: '0 0 * * *'

# Weekly on Sunday
- cron: '0 0 * * 0'

# Every 5 minutes (current setting)
- cron: '*/5 * * * *'
```